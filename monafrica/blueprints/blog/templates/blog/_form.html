{% import 'macros/form.html' as f with context %}

{% if add_post %}
  {% set endpoint = 'blog.add_post' %}
  {% set form_kwargs = {} %}
  {% set legend = 'Add a new Post' %}
  {% set button = 'Add' %}
{% else %}
  {% set endpoint = 'blog.edit_post' %}
  {% set form_kwargs = {'id': post.id} %}
  {% set legend = 'Update this post' %}
  {% set button = 'Save' %}
{% endif %}

 <div class="row">
    <div class="col-md-8 col-md-offset-2 well">
    {% call f.form_tag(endpoint, **form_kwargs) %}
      <legend>{{ legend }}</legend>
      <div class="form-group">

      {% call f.form_group(form.title, css_class='sm-margin-bottom',
                            placeholder='Title', autofocus='autofocus') %}
      {% endcall %}

        {% call f.form_group(form.content, css_class='sm-margin-bottom',
                            placeholder='Content') %}
      {% endcall %}
      {% endcall %}

      <hr/>
      <div class="row">
        <div class="col-md-6">
          <button type="submit" class="btn btn-primary btn-block">
            {{ button }}
          </button>
        </div>
        <div class="col-md-6">
          <div class="visible-xs visible-sm sm-margin-top"></div>
          <a href="{{ url_for('blog.list_posts') }}"
              class="btn btn-default btn-block">
            Cancel
          </a>
        </div>
      </div>

  </div>
</div>
 </div>